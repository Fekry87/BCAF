@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design Tokens as CSS Variables */
:root {
  /* Background Colors - Can be customized via Theme admin */
  --color-primary-900: #2c4a6e;  /* Dark backgrounds (hero, dark sections) */
  --color-primary-800: #3a5a7c;  /* Secondary dark backgrounds */
  --color-primary-700: #4a6a8c;  /* Headers, navigation */
  --color-primary-600: #2563a8;  /* Backward compatibility */
  --color-primary-500: #d1d5db;  /* Borders, dividers */
  --color-primary-400: #9ca3af;  /* Backward compatibility */
  --color-primary-100: #ffffff;  /* Cards, panels */
  --color-primary-50: #f8fafc;   /* Page background */

  /* Text Colors - Separate from backgrounds */
  --color-text-heading: #1a1a2e;    /* Main headings */
  --color-text-subheading: #2d2d44; /* Subheadings */
  --color-text-body: #4a4a5a;       /* Body text */
  --color-text-muted: #9ca3af;      /* Captions, placeholders */
  --color-text-link-hover: #2563eb; /* Link hover */

  --color-neutral-900: #1a1a1a;
  --color-neutral-700: #404040;
  --color-neutral-500: #737373;
  --color-neutral-400: #a3a3a3;
  --color-neutral-300: #d4d4d4;
  --color-neutral-200: #e5e5e5;
  --color-neutral-100: #f5f5f5;
  --color-neutral-50: #fafafa;

  --color-accent-yellow: #f4c430;
  --color-accent-yellow-light: #fef9e7;

  /* CTA Colors - Default to yellow */
  --color-cta-primary-bg: #f4c430;
  --color-cta-primary-text: #1a1a2e;
  --color-cta-primary-hover: #e6b62d;

  --color-success: #059669;
  --color-success-light: #ecfdf5;
  --color-error: #dc2626;
  --color-error-light: #fef2f2;
  --color-warning: #d97706;
  --color-warning-light: #fffbeb;
  --color-info: #2563eb;
  --color-info-light: #eff6ff;

  /* Typography - Can be customized via Theme admin */
  --font-heading: "Source Serif 4", Georgia, serif;
  --font-body: Inter, -apple-system, sans-serif;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;
  --space-20: 5rem;
  --space-24: 6rem;

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.05);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.05);
  --shadow-card: 0 2px 8px rgb(0 0 0 / 0.06);

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;
  --transition-accordion: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Base Styles */
@layer base {
  /* Prevent horizontal overflow */
  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  body {
    @apply font-sans antialiased;
    color: var(--color-text-body);
    background-color: var(--color-primary-50);
    font-feature-settings: 'kern' 1, 'liga' 1;
    overflow-x: hidden;
    max-width: 100vw;
  }

  h1 {
    @apply font-serif;
    color: var(--color-text-heading);
  }

  h2, h3, h4, h5, h6 {
    @apply font-serif;
    color: var(--color-text-subheading);
  }

  p {
    color: var(--color-text-body);
  }

  a {
    color: var(--color-text-body);
    @apply transition-colors;
  }

  a:hover {
    color: var(--color-text-link-hover);
  }

  /* Focus States for Accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-600;
  }

  /* Skip to Content Link */
  .skip-link {
    @apply absolute -top-12 left-4 z-50 bg-primary-700 text-white px-4 py-2 rounded;
    transition: top var(--transition-fast);
  }

  .skip-link:focus {
    @apply top-4;
  }

  /* Ensure images don't overflow */
  img {
    max-width: 100%;
    height: auto;
  }
}

/* Component Styles */
@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2.5 sm:px-6 sm:py-3 font-medium rounded-md transition-all duration-200;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-600 focus-visible:ring-offset-2;
    @apply text-sm sm:text-base;
  }

  .btn-primary {
    background-color: var(--color-cta-primary-bg);
    color: var(--color-cta-primary-text);
  }

  .btn-primary:hover {
    background-color: var(--color-cta-primary-hover);
  }

  .btn-secondary {
    @apply bg-white text-primary-700 border border-primary-700 hover:bg-primary-50 active:bg-primary-100;
  }

  .btn-text {
    @apply bg-transparent text-primary-700 hover:text-primary-800 hover:underline;
    @apply px-2 py-1;
  }

  .btn-disabled {
    @apply bg-neutral-200 text-neutral-400 cursor-not-allowed;
  }

  /* Form Inputs */
  .input {
    @apply w-full h-11 sm:h-12 px-3 sm:px-4 border border-neutral-300 rounded-md;
    @apply transition-all duration-200;
    @apply focus:border-primary-600 focus:ring-1 focus:ring-primary-600;
    @apply placeholder:text-neutral-400;
    @apply text-base; /* Prevents iOS zoom on focus */
  }

  .input-error {
    @apply border-red-500 focus:border-red-500 focus:ring-red-500;
  }

  .label {
    @apply block text-sm font-semibold text-neutral-700 mb-2;
  }

  .error-text {
    @apply text-sm text-red-600 mt-1;
  }

  /* Cards - Responsive padding */
  .card {
    @apply bg-white border border-neutral-200 rounded-lg p-5 sm:p-6 md:p-8;
    @apply transition-all duration-200;
    @apply hover:shadow-card hover:border-primary-400;
  }

  /* Accordion */
  .accordion-trigger {
    @apply flex items-center justify-between w-full py-3 sm:py-4 text-left;
    @apply font-semibold text-neutral-900;
    @apply transition-colors hover:text-primary-700;
    @apply text-sm sm:text-base;
  }

  .accordion-content {
    @apply overflow-hidden;
    transition: max-height var(--transition-accordion);
  }

  .accordion-expanded .accordion-bar {
    @apply bg-accent-yellow;
  }

  /* Container - Better mobile padding */
  .container-main {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
    width: 100%;
  }

  /* Section Spacing - Reduced on mobile */
  .section {
    @apply py-10 sm:py-14 md:py-16 lg:py-20 xl:py-24;
  }

  /* Hero - Responsive heights */
  .hero {
    @apply relative flex items-center;
    min-height: 450px;
    height: 70vh;
    max-height: 750px;
  }

  @media (min-width: 640px) {
    .hero {
      min-height: 500px;
      height: 75vh;
      max-height: 800px;
    }
  }

  @media (min-width: 1024px) {
    .hero {
      min-height: 550px;
      height: 80vh;
      max-height: 850px;
    }
  }

  .hero-overlay {
    @apply absolute inset-0;
    background: linear-gradient(
      to right,
      rgba(13, 34, 64, 0.95) 0%,
      rgba(13, 34, 64, 0.85) 40%,
      rgba(13, 34, 64, 0.6) 70%,
      rgba(13, 34, 64, 0.4) 100%
    );
  }

  @media (min-width: 768px) {
    .hero-overlay {
      background: linear-gradient(
        to right,
        rgba(13, 34, 64, 0.9) 0%,
        rgba(13, 34, 64, 0.7) 50%,
        transparent 100%
      );
    }
  }

  /* Yellow accent divider */
  .divider-accent {
    @apply h-1 w-12 sm:w-16 bg-accent-yellow;
  }
}

/* Utility Classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Reduced motion preference - respects user's system settings */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Disable smooth scrolling */
    html {
      scroll-behavior: auto !important;
    }

    /* Ensure accordions still work but without animation */
    .accordion-content {
      transition: none !important;
    }

    /* Disable hover scale effects */
    .card:hover {
      transform: none !important;
    }

    /* Disable spinner animations */
    .animate-spin {
      animation: none !important;
    }

    /* Static focus states instead of animated */
    :focus-visible {
      transition: none !important;
    }
  }

  /* Motion-safe animations - only apply when user prefers motion */
  @media (prefers-reduced-motion: no-preference) {
    .motion-safe\:animate-fadeIn {
      animation: fadeIn 0.3s ease-out;
    }

    .motion-safe\:animate-slideUp {
      animation: slideUp 0.3s ease-out;
    }
  }

  /* Keyframes for animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}
